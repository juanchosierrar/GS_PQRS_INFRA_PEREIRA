(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63059,e=>{"use strict";let s=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>s],63059)},69638,e=>{"use strict";let s=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],69638)},46897,e=>{"use strict";let s=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>s],46897)},31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},96640,e=>{"use strict";var s=e.i(43476),t=e.i(7670),a=e.i(19056);function i({children:e,variant:i="default",className:r}){return(0,s.jsx)("div",{className:function(...e){return(0,a.twMerge)((0,t.clsx)(e))}("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"bg-primary text-primary-foreground hover:bg-primary/80",success:"bg-emerald-500 text-white hover:bg-emerald-600",warning:"bg-amber-500 text-white hover:bg-amber-600",destructive:"bg-rose-500 text-white hover:bg-rose-600",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground"}[i],r),children:e})}e.s(["Badge",()=>i])},68553,e=>{"use strict";let s=(0,e.i(75254).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>s],68553)},90908,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(66027),i=e.i(54616),r=e.i(12598),l=e.i(18566),c=e.i(49002),d=e.i(96640),n=e.i(46897),o=e.i(68553),m=e.i(69638),u=e.i(63059),x=e.i(31278);let h=(0,e.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function p(){let e=(0,r.useQueryClient)(),p=(0,l.useRouter)(),[f,b]=(0,t.useState)(null),[g,j]=(0,t.useState)(!1),[y,v]=(0,t.useState)(""),[N,w]=(0,t.useState)(null),[C,k]=(0,t.useState)(!1),[R,S]=(0,t.useState)(""),{data:E,isLoading:A}=(0,a.useQuery)({queryKey:["pqrs-tecnico"],queryFn:()=>c.PQRService.getAll()}),M=(0,i.useMutation)({mutationFn:({id:e,response:s})=>c.PQRService.updateStatus(e,"RESUELTA",s),onSuccess:()=>{e.invalidateQueries({queryKey:["pqrs-tecnico"]}),b(null),S(""),w(null)}}),P=E?.find(e=>e.id===f);return A?(0,s.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando tareas..."}):f&&P?(0,s.jsxs)("div",{className:"max-w-md mx-auto space-y-6 pb-20",children:[(0,s.jsxs)("button",{onClick:()=>b(null),className:"text-primary font-medium flex items-center mb-4",children:[(0,s.jsx)(u.ChevronRight,{className:"rotate-180 mr-1 h-4 w-4"})," Volver"]}),(0,s.jsxs)("div",{className:"bg-card border rounded-lg p-4 shadow-sm space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:P.radicado}),(0,s.jsx)(d.Badge,{children:P.estado})]}),(0,s.jsx)("p",{className:"font-semibold text-lg",children:P.titulo}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:P.descripcion}),(0,s.jsxs)("div",{className:"bg-muted/50 p-3 rounded text-sm space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Ubicaci칩n:"})," ",P.ubicacion.direccion]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Comuna:"})," ",P.ubicacion.comuna||"No especificada"]})]}),(0,s.jsxs)("button",{onClick:()=>p.push(`/admin/pqr/${P.id}`),className:"w-full py-3 rounded-xl border-2 border-primary/20 bg-primary/5 text-primary font-black text-xs uppercase tracking-widest hover:bg-primary hover:text-white transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(h,{className:"h-4 w-4"}),"Ver Informaci칩n Completa"]})]}),(0,s.jsxs)("div",{className:"bg-card border rounded-lg p-4 shadow-sm space-y-6",children:[(0,s.jsx)("h3",{className:"font-bold border-b pb-2",children:"Registrar Visita"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Coordenadas GPS"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",readOnly:!0,value:y,placeholder:"0.0000, 0.0000",className:"flex-1 bg-muted px-3 py-2 rounded border text-sm focus:outline-none"}),(0,s.jsxs)("button",{onClick:()=>{j(!0),setTimeout(()=>{v("4.81333, -75.69611"),j(!1)},1500)},disabled:g,className:"bg-primary text-white p-2 rounded flex items-center justify-center min-w-[120px]",children:[g?(0,s.jsx)(x.Loader2,{className:"animate-spin h-4 w-4"}):(0,s.jsx)(n.MapPin,{className:"h-4 w-4 mr-1"}),g?"Cargando...":"游늸 Ubicaci칩n"]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Evidencia Fotogr치fica"}),(0,s.jsx)("div",{className:"flex flex-col items-center gap-4",children:N?(0,s.jsx)("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden border",children:(0,s.jsx)("img",{src:N,alt:"Evidencia",className:"object-cover w-full h-full"})}):(0,s.jsxs)("button",{onClick:()=>{k(!0),setTimeout(()=>{w("https://images.unsplash.com/photo-1584467735815-f778f274e296?q=80&w=400&auto=format&fit=crop"),k(!1)},1500)},disabled:C,className:"w-full h-32 border-2 border-dashed rounded-lg flex flex-col items-center justify-center text-muted-foreground hover:bg-muted transition-colors",children:[C?(0,s.jsx)(x.Loader2,{className:"animate-spin"}):(0,s.jsx)(o.Camera,{className:"h-8 w-8 mb-2"}),(0,s.jsx)("span",{children:C?"Subiendo...":"Capturar / Subir Foto"})]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Respuesta / Observaciones"}),(0,s.jsx)("textarea",{rows:4,value:R,onChange:e=>S(e.target.value),className:"w-full border rounded p-3 text-sm focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Describa el trabajo realizado..."})]}),(0,s.jsxs)("button",{disabled:M.isPending||!y||!R,onClick:()=>M.mutate({id:P.id,response:R}),className:"w-full bg-emerald-600 text-white font-bold py-3 rounded-lg flex items-center justify-center shadow-lg active:scale-95 transition-all disabled:opacity-50 disabled:active:scale-100",children:[M.isPending?(0,s.jsx)(x.Loader2,{className:"animate-spin mr-2"}):(0,s.jsx)(m.CheckCircle,{className:"mr-2"}),"CERRAR PQR"]})]})]}):(0,s.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Mis Tareas"}),(0,s.jsxs)(d.Badge,{variant:"outline",children:[E?.filter(e=>"RESUELTA"!==e.estado).length||0," Pendientes"]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[E?.filter(e=>"RESUELTA"!==e.estado).map(e=>(0,s.jsxs)("div",{onClick:()=>b(e.id),className:"bg-card border rounded-xl p-4 shadow-sm flex justify-between items-center cursor-pointer active:bg-muted transition-colors",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-primary",children:e.radicado}),(0,s.jsx)("h3",{className:"font-semibold line-clamp-1",children:e.titulo}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center",children:[(0,s.jsx)(n.MapPin,{className:"h-3 w-3 mr-1"})," ",e.ubicacion.direccion]})]}),(0,s.jsx)(u.ChevronRight,{className:"text-muted-foreground"})]},e.id)),E?.filter(e=>"RESUELTA"===e.estado).length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-muted-foreground mt-8 mb-2",children:"Completadas"}),E?.filter(e=>"RESUELTA"===e.estado).map(e=>(0,s.jsxs)("div",{className:"bg-muted/30 border rounded-xl p-4 opacity-70 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-muted-foreground",children:e.radicado}),(0,s.jsx)("h3",{className:"font-semibold line-clamp-1 text-muted-foreground",children:e.titulo})]}),(0,s.jsx)(m.CheckCircle,{className:"text-emerald-500 h-5 w-5"})]},e.id))]})]})]})}e.s(["default",()=>p],90908)}]);