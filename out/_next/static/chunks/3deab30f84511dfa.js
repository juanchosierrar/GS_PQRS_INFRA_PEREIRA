(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},96640,e=>{"use strict";var t=e.i(43476),a=e.i(7670),s=e.i(19056);function i({children:e,variant:i="default",className:r}){return(0,t.jsx)("div",{className:function(...e){return(0,s.twMerge)((0,a.clsx)(e))}("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"bg-primary text-primary-foreground hover:bg-primary/80",success:"bg-emerald-500 text-white hover:bg-emerald-600",warning:"bg-amber-500 text-white hover:bg-amber-600",destructive:"bg-rose-500 text-white hover:bg-rose-600",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground"}[i],r),children:e})}e.s(["Badge",()=>i])},95740,e=>{"use strict";let t=(0,e.i(75254).default)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);e.s(["UserCircle",()=>t],95740)},94983,e=>{"use strict";let t=(0,e.i(75254).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);e.s(["MessageCircle",()=>t],94983)},95468,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},26514,e=>{"use strict";var t=e.i(34662),a=e.i(77241),s=e.i(81092);function i(e,i){let h,b,g=()=>(0,a.constructFrom)(i?.in,NaN),f=i?.additionalDigits??2,N=function(e){let t,a={},s=e.split(r);if(s.length>2)return a;if(/:/.test(s[0])?t=s[0]:(a.date=s[0],t=s[1],n.test(a.date)&&(a.date=e.split(n)[0],t=e.substr(a.date.length,e.length))),t){let e=l.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}(e);if(N.date){let e=function(e,t){let a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(a);if(!s)return{year:NaN,restDateString:""};let i=s[1]?parseInt(s[1]):null,r=s[2]?parseInt(s[2]):null;return{year:null===r?i:100*r,restDateString:e.slice((s[1]||s[2]).length)}}(N.date,f);h=function(e,t){var a,s,i,r,n,l,o,d,p,h;if(null===t)return new Date(NaN);let b=e.match(c);if(!b)return new Date(NaN);let g=!!b[4],f=x(b[1]),N=x(b[2])-1,j=x(b[3]),v=x(b[4]),w=x(b[5])-1;if(g){let e,l;return(a=v,s=w,a>=1&&a<=53&&s>=0&&s<=6)?(i=t,r=v,n=w,(e=new Date(0)).setUTCFullYear(i,0,4),l=e.getUTCDay()||7,e.setUTCDate(e.getUTCDate()+((r-1)*7+n+1-l)),e):new Date(NaN)}{let e=new Date(0);return(l=t,o=N,d=j,o>=0&&o<=11&&d>=1&&d<=(m[o]||(u(l)?29:28))&&(p=t,(h=f)>=1&&h<=(u(p)?366:365)))?(e.setUTCFullYear(t,N,Math.max(f,j)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!h||isNaN(+h))return g();let j=+h,v=0;if(N.time&&isNaN(v=function(e){var a,s,i;let r=e.match(o);if(!r)return NaN;let n=p(r[1]),l=p(r[2]),c=p(r[3]);return(a=n,s=l,i=c,24===a?0===s&&0===i:i>=0&&i<60&&s>=0&&s<60&&a>=0&&a<25)?n*t.millisecondsInHour+l*t.millisecondsInMinute+1e3*c:NaN}(N.time)))return g();if(N.timezone){if(isNaN(b=function(e){var a;if("Z"===e)return 0;let s=e.match(d);if(!s)return 0;let i="+"===s[1]?-1:1,r=parseInt(s[2]),n=s[3]&&parseInt(s[3])||0;return(a=n)>=0&&a<=59?i*(r*t.millisecondsInHour+n*t.millisecondsInMinute):NaN}(N.timezone)))return g()}else{let e=new Date(j+v),t=(0,s.toDate)(0,i?.in);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return(0,s.toDate)(j+v+b,i?.in)}let r=/[T ]/,n=/[Z ]/i,l=/([Z+-].*)$/,c=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,o=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function x(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}let m=[31,null,31,30,31,30,31,31,30,31,30,31];function u(e){return e%400==0||e%4==0&&e%100!=0}e.s(["parseISO",()=>i])},9019,e=>{"use strict";var t=e.i(45110),a=e.i(81515);function s(e,s,r){let[n,l]=(0,t.normalizeDates)(r?.in,e,s),c=i(n,l),o=Math.abs((0,a.differenceInCalendarDays)(n,l));n.setDate(n.getDate()-c*o);let d=Number(i(n,l)===-c),x=c*(o-d);return 0===x?0:x}function i(e,t){let a=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return a<0?-1:a>0?1:a}e.s(["differenceInDays",()=>s])},12478,30453,e=>{"use strict";var t=e.i(81092);function a(e){return+(0,t.toDate)(e)<Date.now()}e.s(["isPast",()=>a],12478);var s=e.i(43476),i=e.i(75157),r=e.i(96640);function n({title:e,value:t,icon:a,color:n,active:l,onClick:c}){return(0,s.jsxs)("div",{onClick:c,className:(0,i.cn)("group relative overflow-hidden rounded-[2.5rem] border-2 bg-white p-10 shadow-sm hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 cursor-pointer",l?({primary:"border-blue-600 ring-8 ring-blue-600/5",destructive:"border-rose-600 ring-8 ring-rose-600/5",warning:"border-amber-500 ring-8 ring-amber-500/5",success:"border-emerald-500 ring-8 ring-emerald-500/5"})[n]:"border-zinc-100"),children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between space-y-0 pb-6 relative z-10",children:[(0,s.jsx)("h3",{className:(0,i.cn)("text-[10px] font-black uppercase tracking-[0.3em] transition-colors",l?"text-zinc-900":"text-zinc-400"),children:e}),(0,s.jsx)("div",{className:(0,i.cn)("p-4 rounded-2xl bg-gradient-to-br text-white group-hover:rotate-12 transition-transform shadow-xl",{primary:"from-blue-600 to-blue-700 shadow-blue-600/20",destructive:"from-rose-600 to-rose-700 shadow-rose-600/20",warning:"from-amber-500 to-amber-600 shadow-amber-500/20",success:"from-emerald-500 to-emerald-600 shadow-emerald-500/20"}[n]),children:a})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-baseline gap-3 relative z-10",children:[(0,s.jsx)("div",{className:"text-6xl font-black tracking-tighter text-zinc-900 italic leading-none",children:t}),(0,s.jsx)("div",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em]",children:"Registros"})]}),l&&(0,s.jsx)("div",{className:"absolute top-6 right-20 z-20",children:(0,s.jsx)(r.Badge,{className:"text-[8px] font-black uppercase tracking-widest bg-zinc-900 text-white border-none py-1 px-3 shadow-lg",children:"Filtro Activo"})}),(0,s.jsx)("div",{className:"absolute -bottom-12 -right-12 h-48 w-48 bg-zinc-100/50 rounded-full group-hover:scale-150 transition-transform duration-1000 opacity-30 select-none pointer-events-none"})]})}e.s(["default",()=>n],30453)},55782,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(66027),i=e.i(54616),r=e.i(12598),n=e.i(49002),l=e.i(82526),c=e.i(3707),o=e.i(96640),d=e.i(7486),x=e.i(31278),p=e.i(95740),m=e.i(63209),u=e.i(95468),h=e.i(55436),b=e.i(75254);let g=(0,b.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var f=e.i(46897);let N=(0,b.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var j=e.i(84614),v=e.i(60289),w=e.i(3116),y=e.i(63488),k=e.i(94983),C=e.i(1851),z=e.i(26514),E=e.i(12478),A=e.i(9019),I=e.i(75157),D=e.i(18566),S=e.i(30453),R=e.i(19284);function T(){let e=(0,D.useRouter)(),b=(0,D.useSearchParams)(),T=(0,r.useQueryClient)(),{user:M}=(0,R.useAuthStore)(),[O,U]=(0,a.useState)(""),[P,L]=(0,a.useState)(""),[q,V]=(0,a.useState)(M?.rol==="DIRECTOR_DEPENDENCIA"?M.dependenciaId:""),[F,_]=(0,a.useState)(""),[B,G]=(0,a.useState)(null),[$,H]=(0,a.useState)(1),W=b.get("tecnicoId"),Q=M?.rol==="TECNICO"?M?.id:W,[Y,K]=(0,a.useState)(null),[Z,J]=(0,a.useState)(""),[X,ee]=(0,a.useState)(""),[et,ea]=(0,a.useState)(""),{data:es,isLoading:ei}=(0,s.useQuery)({queryKey:["pqrs"],queryFn:()=>n.PQRService.getAll()}),{data:er,isLoading:en}=(0,s.useQuery)({queryKey:["users"],queryFn:()=>l.UserService.getAll()}),el=er||c.USUARIOS,ec=(0,i.useMutation)({mutationFn:({pqrId:e,dependenciaId:t,comuna:a,tecnicoId:s})=>n.PQRService.assignToDependency(e,t,a,s),onSuccess:e=>{T.invalidateQueries({queryKey:["pqrs"]});let t=el.find(t=>t.id===e.asignadoA);t?alert(`âœ… Radicado asignado exitosamente.
ðŸ“² Notificaciones enviadas a ${t.nombre} v\xeda Email y WhatsApp.`):alert("âœ… Radicado asignado exitosamente."),K(null),J(""),ee(""),ea("")}}),eo=e=>{G(t=>t===e?null:e)},ed=(0,a.useMemo)(()=>es?es.filter(e=>{let t=""===O||e.radicado.toLowerCase().includes(O.toLowerCase())||e.titulo.toLowerCase().includes(O.toLowerCase())||e.ciudadano.nombre.toLowerCase().includes(O.toLowerCase()),a=""===P||e.ubicacion.comuna===P,s=""===F||e.estado===F,i=""===q||e.dependenciaId===q,r=!Q||e.asignadoA===Q;return t&&a&&s&&i&&r}):[],[es,O,P,F,q,Q]),ex=(0,a.useMemo)(()=>ed.filter(e=>{if(!B||"all"===B)return!0;if("critical"===B)return(0,E.isPast)((0,z.parseISO)(e.fechaVencimiento))&&"RESUELTA"!==e.estado;if("soon"===B){let t=(0,A.differenceInDays)((0,z.parseISO)(e.fechaVencimiento),new Date);return t<=2&&t>=0&&"RESUELTA"!==e.estado}return"resolved"!==B||"RESUELTA"===e.estado||"CERRADA"===e.estado}),[ed,B]),ep=Math.ceil(ex.length/10),em=(0,a.useMemo)(()=>{let e=($-1)*10;return ex.slice(e,e+10)},[ex,$]);return ei||en?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,t.jsx)(x.Loader2,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-muted-foreground animate-pulse text-sm font-medium",children:"SINCRONIZANDO GESTION..."})]}):(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,t.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("h2",{className:"text-4xl font-black tracking-tighter text-zinc-900 flex items-center gap-4 uppercase italic",children:[(0,t.jsx)(v.LayoutDashboard,{className:"h-10 w-10 text-primary not-italic"}),"Control de GestiÃ³n"]}),(0,t.jsx)("p",{className:"text-muted-foreground font-semibold text-xs tracking-[0.1em] uppercase opacity-70",children:"AdministraciÃ³n operativa y flujo de trabajo de radicados"})]})}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(S.default,{title:"Solicitudes Totales",value:ed.length,icon:(0,t.jsx)(h.Search,{className:"h-5 w-5"}),color:"primary",active:"all"===B,onClick:()=>eo("all")}),(0,t.jsx)(S.default,{title:"CrÃ­ticas / Vencidas",value:ed.filter(e=>(0,E.isPast)((0,z.parseISO)(e.fechaVencimiento))&&"RESUELTA"!==e.estado).length,icon:(0,t.jsx)(m.AlertCircle,{className:"h-5 w-5"}),color:"destructive",active:"critical"===B,onClick:()=>eo("critical")}),(0,t.jsx)(S.default,{title:"PrÃ³ximas a Vencer",value:ed.filter(e=>{let t=(0,A.differenceInDays)((0,z.parseISO)(e.fechaVencimiento),new Date);return t<=2&&t>=0&&"RESUELTA"!==e.estado}).length,icon:(0,t.jsx)(w.Clock,{className:"h-5 w-5"}),color:"warning",active:"soon"===B,onClick:()=>eo("soon")}),(0,t.jsx)(S.default,{title:"GestiÃ³n Exitosa",value:ed.filter(e=>"RESUELTA"===e.estado||"CERRADA"===e.estado).length,icon:(0,t.jsx)(u.CheckCircle2,{className:"h-5 w-5"}),color:"success",active:"resolved"===B,onClick:()=>eo("resolved")})]}),(0,t.jsx)("div",{className:"bg-white border-2 border-zinc-100 rounded-[2.5rem] p-8 shadow-sm",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 items-end",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 flex items-center gap-2",children:[(0,t.jsx)(h.Search,{className:"h-3 w-3"}),"Buscar"]}),(0,t.jsx)("input",{type:"text",placeholder:"Radicado, tÃ­tulo...",value:O,onChange:e=>U(e.target.value),className:"w-full px-5 py-4 rounded-2xl border-2 border-zinc-100 focus:border-primary focus:outline-none font-bold text-sm bg-zinc-50/50 transition-all hover:bg-white"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 flex items-center gap-2",children:[(0,t.jsx)(f.MapPin,{className:"h-3 w-3"}),"Comuna"]}),(0,t.jsxs)("select",{value:P,onChange:e=>L(e.target.value),className:"w-full px-5 py-4 rounded-2xl border-2 border-zinc-100 focus:border-primary focus:outline-none font-bold text-sm bg-zinc-50/50 transition-all hover:bg-white",children:[(0,t.jsx)("option",{value:"",children:"Todas"}),c.COMUNAS.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 flex items-center gap-2",children:[(0,t.jsx)(g,{className:"h-3 w-3"}),"Estado"]}),(0,t.jsxs)("select",{value:F,onChange:e=>_(e.target.value),className:"w-full px-5 py-4 rounded-2xl border-2 border-zinc-100 focus:border-primary focus:outline-none font-bold text-sm bg-zinc-50/50 transition-all hover:bg-white",children:[(0,t.jsx)("option",{value:"",children:"Todos"}),(0,t.jsx)("option",{value:"NUEVA",children:"NUEVA"}),(0,t.jsx)("option",{value:"POR_ASIGNAR",children:"POR_ASIGNAR"}),(0,t.jsx)("option",{value:"EN_PROCESO",children:"EN_PROCESO"}),(0,t.jsx)("option",{value:"VISITA_PROGRAMADA",children:"VISITA_PROGRAMADA"}),(0,t.jsx)("option",{value:"RESUELTA",children:"RESUELTA"}),(0,t.jsx)("option",{value:"DEVUELTA",children:"DEVUELTA"}),(0,t.jsx)("option",{value:"CERRADA",children:"CERRADA"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 flex items-center gap-2",children:[(0,t.jsx)(d.Building2,{className:"h-3 w-3"}),"Dependencia"]}),(0,t.jsxs)("select",{value:q,disabled:M?.rol==="DIRECTOR_DEPENDENCIA",onChange:e=>V(e.target.value),className:"w-full px-5 py-4 rounded-2xl border-2 border-zinc-100 focus:border-primary focus:outline-none font-bold text-sm bg-zinc-50/50 transition-all hover:bg-white disabled:opacity-70 disabled:grayscale-[0.5]",children:[(0,t.jsx)("option",{value:"",children:"Todas"}),c.DEPENDENCIAS.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,t.jsx)("button",{onClick:()=>{U(""),L(""),_(""),V(M?.rol==="DIRECTOR_DEPENDENCIA"&&M.dependenciaId||""),G(null),H(1)},className:"px-8 py-4 rounded-2xl border-2 border-zinc-100 bg-white hover:bg-zinc-50 text-zinc-700 font-black text-xs uppercase tracking-widest transition-all h-[58px]",children:"Limpiar"})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-[2.5rem] border-2 border-zinc-100 shadow-2xl overflow-hidden relative",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left border-collapse min-w-[1000px]",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-zinc-50 border-b-2 border-zinc-100",children:[(0,t.jsx)("th",{className:"p-4 text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 whitespace-nowrap",children:"Radicado"}),(0,t.jsx)("th",{className:"p-4 text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400",children:"Solicitud / Ciudadano"}),(0,t.jsx)("th",{className:"p-4 text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 whitespace-nowrap",children:"Comuna"}),(0,t.jsx)("th",{className:"p-4 text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 whitespace-nowrap",children:"Estado"}),(0,t.jsx)("th",{className:"p-4 text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400",children:"Dependencia"}),(0,t.jsx)("th",{className:"p-4 text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 whitespace-nowrap",children:"Plazo"}),(0,t.jsx)("th",{className:"p-4 text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 min-w-[200px]",children:"TÃ©cnico"}),(0,t.jsx)("th",{className:"p-4 text-[10px] font-black uppercase tracking-[0.2em] text-zinc-400 text-right",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"divide-y-2 divide-zinc-50",children:em.length>0?em.map(a=>{let s=c.DEPENDENCIAS.find(e=>e.id===a.dependenciaId),i=el.find(e=>e.id===a.asignadoA),r=M?.rol==="ADMIN_GENERAL"||M?.rol==="DIRECTOR_DEPENDENCIA"&&M?.dependenciaId===a.dependenciaId;return(0,t.jsxs)("tr",{className:"group hover:bg-zinc-50/50 transition-all",children:[(0,t.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("button",{onClick:()=>e.push(`/admin/pqr/${a.id}`),className:"text-lg font-black text-primary underline decoration-primary/20 underline-offset-4 leading-none hover:text-primary/70 transition-colors",children:a.radicado}),(0,t.jsx)("p",{className:"text-[10px] font-bold text-zinc-400 uppercase italic",children:(0,C.format)((0,z.parseISO)(a.fechaCreacion),"dd MMM yyyy")})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-1 max-w-[250px]",children:[(0,t.jsx)("h3",{className:"font-black text-zinc-800 leading-tight line-clamp-2",title:a.titulo,children:a.titulo}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs font-semibold text-zinc-500 whitespace-nowrap overflow-hidden text-ellipsis",children:[(0,t.jsx)(p.UserCircle,{className:"h-3 w-3 text-zinc-400 flex-shrink-0"}),a.ciudadano.nombre]})]})}),(0,t.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-bold text-zinc-600",children:[(0,t.jsx)(f.MapPin,{className:"h-4 w-4 text-primary"}),a.ubicacion.comuna||(0,t.jsx)("span",{className:"text-zinc-300 italic",children:"No esp..."})]})}),(0,t.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,t.jsx)(o.Badge,{variant:a.dependenciaId?a.asignadoA?"default":"warning":"destructive",className:"font-black text-[9px] tracking-widest px-3 py-1",children:a.dependenciaId?a.asignadoA?a.estado:"ESPERANDO TÃ‰CNICO":"NUEVA"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-bold text-zinc-600",children:[(0,t.jsx)(d.Building2,{className:"h-4 w-4 text-zinc-300 flex-shrink-0"}),(0,t.jsx)("span",{className:"line-clamp-1",title:s?.nombre,children:s?.nombre||(0,t.jsx)("span",{className:"text-zinc-400 italic font-medium",children:"PENDIENTE ASIGNACIÃ“N"})})]})}),(0,t.jsx)("td",{className:"p-4 whitespace-nowrap",children:(()=>{let e=(0,z.parseISO)(a.fechaVencimiento),s=(0,A.differenceInDays)(e,new Date);if("RESUELTA"===a.estado||"CERRADA"===a.estado)return(0,t.jsx)(o.Badge,{variant:"success",className:"bg-emerald-50 text-emerald-600 border-emerald-100 font-black text-[9px] px-2 py-1",children:"FINALIZADO"});let i="bg-zinc-50 text-zinc-600 border-zinc-100";return s<=0?i="bg-rose-50 text-rose-600 border-rose-200 animate-pulse":s<=3?i="bg-red-50 text-red-600 border-red-200":s<=5?i="bg-amber-50 text-amber-600 border-amber-200":s>=10&&(i="bg-emerald-50 text-emerald-600 border-emerald-200"),(0,t.jsxs)("div",{className:(0,I.cn)("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border font-black text-[10px] tracking-tight",i),children:[(0,t.jsx)(w.Clock,{className:"h-3 w-3"}),s<=0?"VENCIDO":`${s} D\xcdAS`]})})()}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-bold text-zinc-600",children:[(0,t.jsx)(j.User,{className:(0,I.cn)("h-4 w-4",i?"text-purple-500":"text-zinc-300")}),i?(0,t.jsx)("span",{className:"text-purple-900",children:i.nombre}):(0,t.jsx)("span",{className:"text-zinc-300 italic",children:"Pendiente..."})]}),i&&(0,t.jsxs)("div",{className:"flex items-center gap-3 pl-6",children:[(0,t.jsxs)("div",{title:a.notificadoEmail?"Email Enviado":"Email Pendiente",className:(0,I.cn)("flex items-center gap-1 text-[9px] font-black uppercase tracking-wider px-1.5 py-0.5 rounded-md border transition-all",a.notificadoEmail?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-zinc-50 text-zinc-300 border-zinc-100"),children:[(0,t.jsx)(y.Mail,{className:"h-3 w-3"}),a.notificadoEmail&&(0,t.jsx)("span",{children:"Email"})]}),(0,t.jsxs)("div",{title:a.notificadoWhatsapp?"WhatsApp Enviado":"WhatsApp Pendiente",className:(0,I.cn)("flex items-center gap-1 text-[9px] font-black uppercase tracking-wider px-1.5 py-0.5 rounded-md border transition-all",a.notificadoWhatsapp?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-zinc-50 text-zinc-300 border-zinc-100"),children:[(0,t.jsx)(k.MessageCircle,{className:"h-3 w-3"}),a.notificadoWhatsapp&&(0,t.jsx)("span",{children:"Chat"})]})]})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[r&&(0,t.jsx)("button",{onClick:()=>{K(a.id),ee(a.ubicacion.comuna||""),J(a.dependenciaId||"")},className:"px-3 py-2 bg-amber-500 text-white rounded-xl text-[10px] font-black uppercase hover:bg-amber-600 transition-all shadow-lg shadow-amber-500/20 whitespace-nowrap",children:a.asignadoA?"Reasignar":"Asignar"}),(0,t.jsx)("button",{onClick:()=>e.push(`/admin/pqr/${a.id}`),className:"px-4 py-2 border-2 border-zinc-100 rounded-xl text-[10px] font-black uppercase hover:bg-zinc-50 transition-all",children:"Detalles"})]})})]},a.id)}):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:8,className:"p-20 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-zinc-300",children:[(0,t.jsx)(m.AlertCircle,{className:"h-16 w-16 opacity-20"}),(0,t.jsx)("p",{className:"text-xl font-black uppercase tracking-widest italic opacity-40",children:"No se encontraron registros"})]})})})})]})}),ep>1&&(0,t.jsxs)("div",{className:"p-6 bg-zinc-50 border-t-2 border-zinc-100 flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("p",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:["Mostrando ",(0,t.jsx)("span",{className:"text-zinc-900",children:em.length})," de ",(0,t.jsx)("span",{className:"text-zinc-900",children:ex.length})," registros"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{H(e=>Math.max(1,e-1)),document.querySelector("table")?.scrollIntoView({behavior:"smooth"})},disabled:1===$,className:"p-2 rounded-xl border-2 border-zinc-200 bg-white text-zinc-500 hover:bg-zinc-100 disabled:opacity-50 transition-all shadow-sm",children:(0,t.jsx)(N,{className:"h-4 w-4 rotate-180"})}),(0,t.jsx)("div",{className:"flex items-center gap-1 overflow-x-auto max-w-[200px] md:max-w-none pb-1 md:pb-0",children:[...Array(ep)].map((e,a)=>(0,t.jsx)("button",{onClick:()=>{H(a+1),document.querySelector("table")?.scrollIntoView({behavior:"smooth"})},className:(0,I.cn)("min-w-[32px] h-8 rounded-xl font-black text-xs transition-all",$===a+1?"bg-primary text-white shadow-lg shadow-primary/20":"text-zinc-400 hover:bg-zinc-200"),children:a+1},a))}),(0,t.jsx)("button",{onClick:()=>{H(e=>Math.min(ep,e+1)),document.querySelector("table")?.scrollIntoView({behavior:"smooth"})},disabled:$===ep,className:"p-2 rounded-xl border-2 border-zinc-200 bg-white text-zinc-500 hover:bg-zinc-100 disabled:opacity-50 transition-all shadow-sm",children:(0,t.jsx)(N,{className:"h-4 w-4"})})]})]})]}),Y&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-[2rem] p-8 max-w-md w-full shadow-2xl animate-in zoom-in-95 duration-200 border-4 border-amber-500/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6 text-amber-600",children:[(0,t.jsx)("div",{className:"bg-amber-100 p-3 rounded-2xl",children:(0,t.jsx)(d.Building2,{className:"h-8 w-8"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-2xl font-black uppercase italic leading-none",children:"Asignar Ãrea"}),(0,t.jsx)("p",{className:"text-xs font-bold text-amber-700/60 mt-1 uppercase tracking-wider",children:"Paso necesario para el flujo"})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black uppercase text-zinc-400 ml-1",children:"Ãrea Responsable"}),(0,t.jsxs)("select",{value:Z,disabled:M?.rol==="DIRECTOR_DEPENDENCIA",onChange:e=>{J(e.target.value),ea("")},className:"w-full px-5 py-4 rounded-2xl border-2 border-zinc-100 focus:border-amber-500 focus:outline-none font-bold text-lg appearance-none bg-zinc-50 disabled:opacity-70 disabled:grayscale-[0.5]",children:[(0,t.jsx)("option",{value:"",children:"-- SELECCIONAR ÃREA --"}),c.DEPENDENCIAS.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),Z&&(0,t.jsxs)("div",{className:"space-y-2 animate-in slide-in-from-top-2 duration-300",children:[(0,t.jsx)("label",{className:"text-[10px] font-black uppercase text-zinc-400 ml-1",children:"Seleccionar TÃ©cnico"}),(0,t.jsxs)("select",{value:et,onChange:e=>ea(e.target.value),className:"w-full px-5 py-4 rounded-2xl border-2 border-emerald-100 bg-emerald-50 text-emerald-800 font-bold text-lg appearance-none",children:[(0,t.jsx)("option",{value:"",children:"-- SELECCIONAR TÃ‰CNICO --"}),el.filter(e=>"TECNICO"===e.rol&&e.dependenciaId===Z).map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-emerald-600 uppercase ml-1 italic tracking-wider",children:"* El tÃ©cnico recibirÃ¡ una notificaciÃ³n para realizar la visita"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black uppercase text-zinc-400 ml-1",children:"Seleccionar Comuna"}),(0,t.jsxs)("select",{value:X,onChange:e=>ee(e.target.value),className:"w-full px-5 py-4 rounded-2xl border-2 border-zinc-100 focus:border-amber-500 focus:outline-none font-bold text-lg appearance-none bg-zinc-50",children:[(0,t.jsx)("option",{value:"",children:"-- SELECCIONAR COMUNA --"}),c.COMUNAS.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),!X&&(0,t.jsx)("p",{className:"text-[10px] font-bold text-rose-500 uppercase ml-1",children:"* La comuna es obligatoria para continuar"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)("button",{onClick:()=>{Z&&X&&ec.mutate({pqrId:Y,dependenciaId:Z,comuna:X,tecnicoId:et||void 0})},disabled:!Z||!X||ec.isPending,className:"flex-1 bg-gradient-to-r from-amber-500 to-amber-600 text-white px-6 py-4 rounded-2xl font-black uppercase text-sm shadow-xl shadow-amber-500/30 hover:shadow-2xl hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:ec.isPending?"Procesando...":"Confirmar"}),(0,t.jsx)("button",{onClick:()=>{K(null),J(""),ee(""),ea("")},className:"px-6 py-4 rounded-2xl border-2 border-zinc-100 font-black uppercase text-xs text-zinc-500 hover:bg-zinc-50 transition-all",children:"Cerrar"})]})]})]})})]})}function M(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"p-8 text-center text-muted-foreground uppercase font-black tracking-widest animate-pulse",children:"Cargando Inbox..."}),children:(0,t.jsx)(T,{})})}e.s(["default",()=>M],55782)}]);